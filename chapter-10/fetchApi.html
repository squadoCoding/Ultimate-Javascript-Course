<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>This is a tutorila on fetch API of javascript</title>
  </head>
  <body>
    <script>
      // Get request using fetch API
      // const p = fetch("https://jsonplaceholder.typicode.com/todos/1");
      // p.then((res) => {
      //   console.log(res);
      //   return res.json();
      //   // return res.text();
      // }).then((data) => {
      //   console.log(data);
      // });

      // Post request using fetch API
      // const options = {
      //   method: "POST",
      //   body: JSON.stringify({
      //     title: "siddhnat",
      //     body: "bar",
      //     userId: 78,
      //   }),
      //   headers: {
      //     "Content-type": "application/json; charset=UTF-8",
      //   },
      // };

      // const req = fetch("https://jsonplaceholder.typicode.com/posts", options)
      //   .then((response) => {
      //     return response.json();
      //   })
      //   .then((json) => {
      //     console.log(json);
      //   });

      const createToDo = async (todo) => {
        const options = {
          method: "POST",
          body: JSON.stringify(todo),
          headers: {
            "Content-type": "application/json; charset=UTF-8",
          },
        };

        const req = await fetch(
          "https://jsonplaceholder.typicode.com/posts",
          options
        );
        const response = await req.json();
        return response;
      };
      const getToDo = async (id) => {
        const todo = await fetch(
          "https://jsonplaceholder.typicode.com/posts/" + id
        );
        const data = todo.json();

        return data;
      };

      const mainFunc = async () => {
        const todoObj = {
          title: "siddhnat2",
          body: "bar2",
          userId: 23,
          userId: 34,
        };
        const todo = await createToDo(todoObj);
        console.log("posting...");
        console.log(todo);
        console.log("Fetching....");
        console.log(await getToDo(23));
      };

      mainFunc();
    </script>
  </body>
</html>
